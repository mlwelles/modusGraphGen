package {{.Name}}

import (
	"github.com/matthewmcneely/modusgraph"
)

// Client provides typed access to the {{.Name}} data model.
type Client struct {
	conn modusgraph.Client
{{- range .Entities}}
	{{.Name}} *{{.Name}}Client
{{- end}}
}

// New creates a new Client connected to the graph database at connStr.
func New(connStr string, opts ...modusgraph.ClientOpt) (*Client, error) {
	conn, err := modusgraph.NewClient(connStr, opts...)
	if err != nil {
		return nil, err
	}
	return NewFromClient(conn), nil
}

// NewFromClient creates a new Client from an existing modusgraph.Client connection.
func NewFromClient(conn modusgraph.Client) *Client {
	return &Client{
		conn: conn,
{{- range .Entities}}
		{{.Name}}: &{{.Name}}Client{conn: conn},
{{- end}}
	}
}

// Close releases all resources used by the client.
func (c *Client) Close() {
	c.conn.Close()
}
